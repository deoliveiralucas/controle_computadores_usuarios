<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                template="/template/template.xhtml">
    <ui:define name="titulo">Pós Graduação Web e Mobile 2015</ui:define>              
    <ui:define name="conteudo">

        <div class="container" ng-app="computerApp">
            <div class="jumbotron" ng-controller="formController">
                <div class="text-center">
                    <h2 class="form-signin-heading">Abrir Chamado</h2>
                    <br />
                </div>

                <form class="form-horizontal" role="form">
                    <div class="form-group">
                        <label class="control-label col-sm-3">Computador: </label>
                        <div class="col-sm-8">
                            <select name="computerId" class="form-control" ng-model="userSupport.computerId.computerId" ng-options="o.computerId as o.name for o in computers" required="required">
                                <option value="">Selecione um computador</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3">Usuário: </label>
                        <div class="col-sm-8">
                            <select name="userId" class="form-control" ng-model="userSupport.userId.userId" ng-options="o.userId as o.name for o in users" required="required">
                                <option value="">Selecione um usuário</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3">Descrição: </label>
                        <div class="col-sm-8">
                            <textarea rows="4" name="description" ng-model="userSupport.description" class="form-control" placeholder="Digite a descrição do problema..." required="required" />
                        </div>
                    </div>
                    <div class="form-group text-center">
                        <div>
                            <a type="submit" href="/ManageComputer/publico/login.jsf" class="btn btn-danger">Cancelar</a>
                            <button type="submit" class="btn btn-success" style="width: 200px;" ng-click="save(userSupport)">Abrir chamado</button>
                        </div>
                    </div>
                </form>
                <hr />
                <h3>Chamados abertos</h3>
                <table id="tabelaAngular"
                       class="table table-striped table-bordered table-responsive"
                       cellspacing="0" width="100%">
                    <thead>
                        <tr>
                            <th>Computador</th>
                            <th>Usuário</th>
                            <th>Área</th>
                            <th>E-mail</th>
                            <th>Descrição</th>
                            <th>Abertura</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="u in openSupports">
                            <td>{{ u.computerId.name}}</td>
                            <td>{{ u.userId.name}}</td>
                            <td>{{ u.userId.area}}</td>
                            <td>{{ u.userId.mail}}</td>
                            <td>{{ u.description}}</td>
                            <td>{{ u.insertedAt | date:'dd/MM/yyyy' }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <script src="#{facesContext.externalContext.requestContextPath}/resources/js/jquery.min.js" type="text/javascript"></script>

    </ui:define>
</ui:composition>

